{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _native = require(\"@react-navigation/native\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _this = this,\n    _jsxFileName = \"/Users/kevin/Desktop/group-1010001/front-mobile-gpe/screens/ChatPage.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar ChatPage = function ChatPage(_ref) {\n  var route = _ref.route;\n\n  var _useState = (0, _react.useState)([]),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(''),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      inputText = _useState4[0],\n      setInputText = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var navigation = (0, _native.useNavigation)();\n  (0, _react.useEffect)(function () {\n    setMessages(function (prevMessages) {\n      return [].concat((0, _toConsumableArray2.default)(prevMessages), [{\n        text: route.params.initialMessage,\n        fromUser: true\n      }]);\n    });\n    setIsLoading(true);\n    var delay = setTimeout(function () {\n      setMessages(function (prevMessages) {\n        return [].concat((0, _toConsumableArray2.default)(prevMessages), [{\n          text: \"Bonjour, que puis-je faire pour vous?\",\n          fromUser: false\n        }]);\n      });\n      setIsLoading(false);\n    }, 1000);\n    return function () {\n      return clearTimeout(delay);\n    };\n  }, []);\n\n  var handleSendMessage = function handleSendMessage() {\n    if (inputText.trim() === '') {\n      return;\n    }\n\n    setMessages(function (prevMessages) {\n      return [].concat((0, _toConsumableArray2.default)(prevMessages), [{\n        text: inputText,\n        fromUser: true\n      }]);\n    });\n    setInputText('');\n    setIsLoading(true);\n    var delay = setTimeout(function () {\n      setMessages(function (prevMessages) {\n        return [].concat((0, _toConsumableArray2.default)(prevMessages), [{\n          text: \"Réponse de l'IA à '\" + inputText + \"'\",\n          fromUser: false\n        }]);\n      });\n      setIsLoading(false);\n    }, 1000);\n    return function () {\n      return clearTimeout(delay);\n    };\n  };\n\n  return (0, _jsxRuntime.jsxs)(_reactNative.View, {\n    style: styles.container,\n    children: [(0, _jsxRuntime.jsx)(_reactNative.FlatList, {\n      data: messages,\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item,\n            index = _ref2.index;\n        return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {\n          children: isLoading && index === messages.length - 1 ? (0, _jsxRuntime.jsx)(_reactNative.View, {\n            style: styles.botMessage,\n            children: (0, _jsxRuntime.jsx)(_reactNative.ActivityIndicator, {\n              size: \"small\",\n              color: \"#0000ff\"\n            })\n          }) : (0, _jsxRuntime.jsx)(_reactNative.View, {\n            style: item.fromUser ? styles.userMessage : styles.botMessage,\n            children: (0, _jsxRuntime.jsx)(_reactNative.Text, {\n              children: item.text\n            })\n          }, index)\n        });\n      },\n      contentContainerStyle: styles.messagesContainer,\n      keyExtractor: function keyExtractor(item, index) {\n        return index.toString();\n      }\n    }), (0, _jsxRuntime.jsxs)(_reactNative.View, {\n      style: styles.inputContainer,\n      children: [(0, _jsxRuntime.jsx)(_reactNative.TextInput, {\n        style: styles.textInput,\n        value: inputText,\n        onChangeText: function onChangeText(text) {\n          return setInputText(text);\n        },\n        placeholder: \"Saisissez votre question...\"\n      }), (0, _jsxRuntime.jsx)(_reactNative.TouchableOpacity, {\n        style: styles.sendButton,\n        onPress: handleSendMessage,\n        children: (0, _jsxRuntime.jsx)(_reactNative.Text, {\n          children: \"Envoyer\"\n        })\n      })]\n    })]\n  });\n};\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    padding: 16\n  },\n  userMessage: {\n    alignSelf: 'flex-end',\n    backgroundColor: '#e2f9ff',\n    padding: 8,\n    borderRadius: 8,\n    marginBottom: 8,\n    maxWidth: '70%'\n  },\n  botMessage: {\n    alignSelf: 'flex-start',\n    backgroundColor: '#f2f2f2',\n    padding: 8,\n    borderRadius: 8,\n    marginBottom: 8,\n    maxWidth: '70%'\n  },\n  messagesContainer: {\n    flexGrow: 1\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderTopWidth: 1,\n    borderTopColor: '#ccc'\n  },\n  textInput: {\n    flex: 1,\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderRadius: 8,\n    padding: 8\n  },\n  sendButton: {\n    marginLeft: 8,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    backgroundColor: 'blue',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nvar _default = ChatPage;\nexports.default = _default;","map":{"version":3,"names":["ChatPage","route","useState","messages","setMessages","inputText","setInputText","isLoading","setIsLoading","navigation","useNavigation","useEffect","prevMessages","text","params","initialMessage","fromUser","delay","setTimeout","clearTimeout","handleSendMessage","trim","styles","container","item","index","length","botMessage","userMessage","messagesContainer","toString","inputContainer","textInput","sendButton","StyleSheet","create","flex","backgroundColor","padding","alignSelf","borderRadius","marginBottom","maxWidth","flexGrow","flexDirection","alignItems","justifyContent","paddingHorizontal","paddingVertical","borderTopWidth","borderTopColor","borderWidth","borderColor","marginLeft"],"sources":["/Users/kevin/Desktop/group-1010001/front-mobile-gpe/screens/ChatPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TextInput, TouchableOpacity, FlatList, ActivityIndicator } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\n\nconst ChatPage = ({ route }) => {\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const navigation = useNavigation();\n\n  useEffect(() => {\n    setMessages((prevMessages) => [...prevMessages, { text: route.params.initialMessage, fromUser: true }]);\n\n    setIsLoading(true);\n\n    const delay = setTimeout(() => {\n      setMessages((prevMessages) => [...prevMessages, { text: \"Bonjour, que puis-je faire pour vous?\", fromUser: false }]);\n      setIsLoading(false);\n    }, 1000);\n\n    return () => clearTimeout(delay);\n  }, []);\n\n  const handleSendMessage = () => {\n    if (inputText.trim() === '') {\n      return;\n    }\n\n    setMessages((prevMessages) => [...prevMessages, { text: inputText, fromUser: true }]);\n    setInputText('');\n    setIsLoading(true);\n\n    const delay = setTimeout(() => {\n      setMessages((prevMessages) => [...prevMessages, { text: \"Réponse de l'IA à '\" + inputText + \"'\", fromUser: false }]);\n      setIsLoading(false);\n    }, 1000);\n\n    return () => clearTimeout(delay);\n  };\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={messages}\n        renderItem={({ item, index }) => (\n          <>\n            {isLoading && index === messages.length - 1 ? (\n              <View style={styles.botMessage}>\n                <ActivityIndicator size=\"small\" color=\"#0000ff\" />\n              </View>\n            ) : (\n              <View key={index} style={item.fromUser ? styles.userMessage : styles.botMessage}>\n                <Text>{item.text}</Text>\n              </View>\n            )}\n          </>\n        )}\n        contentContainerStyle={styles.messagesContainer}\n        keyExtractor={(item, index) => index.toString()}\n      />\n\n      {/* Champ de saisie et bouton d'envoi */}\n      <View style={styles.inputContainer}>\n        <TextInput\n          style={styles.textInput}\n          value={inputText}\n          onChangeText={(text) => setInputText(text)}\n          placeholder=\"Saisissez votre question...\"\n        />\n        <TouchableOpacity style={styles.sendButton} onPress={handleSendMessage}>\n          <Text>Envoyer</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    padding: 16,\n  },\n  userMessage: {\n    alignSelf: 'flex-end',\n    backgroundColor: '#e2f9ff',\n    padding: 8,\n    borderRadius: 8,\n    marginBottom: 8,\n    maxWidth: '70%',\n  },\n  botMessage: {\n    alignSelf: 'flex-start',\n    backgroundColor: '#f2f2f2',\n    padding: 8,\n    borderRadius: 8,\n    marginBottom: 8,\n    maxWidth: '70%',\n  },\n  messagesContainer: {\n    flexGrow: 1,\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderTopWidth: 1,\n    borderTopColor: '#ccc',\n  },\n  textInput: {\n    flex: 1,\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderRadius: 8,\n    padding: 8,\n  },\n  sendButton: {\n    marginLeft: 8,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    backgroundColor: 'blue',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\nexport default ChatPage;\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}